import pandas as pd
import datetime
import folium
from folium.map import *
from folium import plugins
from folium.plugins import MeasureControl
from folium.plugins import FloatImage
import os

state_geo = './datasets/turkana.json'
pipes = './datasets/pipes.json'
print(state_geo)

borehole_locations = [[3.116605032583696, 35.56832313537598], [3.0971701910746634,
                                                               35.61799630522728], [3.128796319039309, 35.60201168060303]]


desalinator_location = [[
    3.0984785355270246, 35.615057945251465

], [
    3.127200104175716, 35.60202240943909

]]

good_sensor_locations = [[3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845],
                         [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845], [3.1124055408946742, 35.60550928115845]]

SF_COORDINATES = (3.1155, 35.6041)


m = folium.Map(location=SF_COORDINATES, zoom_start=15, tiles='OpenStreetMap')

borehole_cluster = folium.plugins.MarkerCluster(name="Boreholes").add_to(m)

desal_cluster = folium.plugins.MarkerCluster(name="Desalinators").add_to(m)

for borehole in borehole_locations:
    print(type(borehole))
    folium.CircleMarker(location=borehole, radius=15,
                        popup='<b>Borehole Located: </b>Here<br></br><b>Location: </b>%s' % (borehole), line_color='#3186cc',
                        fill_color='#8E44AD', fill_opacity=0.4, fill=True).add_to(borehole_cluster)


for gsl in good_sensor_locations:
    print(gsl)
    folium.Marker(location=gsl).add_to(m)

for desal in desalinator_location:
    folium.Marker(
        location=desal,
        popup='Desalinator located here',
        icon=folium.Icon(color='red', icon='water')
    ).add_to(desal_cluster)


folium.GeoJson(state_geo, name="Pipes").add_to(m)

# folium.GeoJson(pipes, name="Acoustic Sensors").add_to(m)


folium.TileLayer(tiles='Stamen Toner', name="Stamen Toner").add_to(m)
folium.TileLayer(tiles='Stamen Terrain', name="Stamen Terrain").add_to(m)
folium.LayerControl().add_to(m)
m.add_child(MeasureControl())


m.add_child(folium.LatLngPopup())

m.save('map.html')
print("Saving the webpage for map....")
